<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Whitespace Trimmer | Formatting Tools</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" type="text/css" href="/styles/index.css" />
  </head>
  <body>
    <header>
      <h1><a href="/">Formatting Tools</a></h1>
    </header>
    <h2>Whitespace Trimmer</h2>
    <p>
      One entry per line.
      Formatting happens whenever you press the Enter key or you click the Format button.
    </p>
    <textarea id="textarea-input"></textarea>
    <button id="format-btn">Format</button>
    <button id="clear-btn">Clear</button>
    <div>
      <input type="checkbox" id="chkbx-rm-empty-lines" checked>
      <label for="chkbx-rm-empty-lines">Remove empty lines</label>
    </div>
    <hr/>
    <h3>Formatted Output</h3>
    <div class="output-container">
      <p id="output"></p>
    </div>
    <footer>
      <a href="https://github.com/frncsdrk/formatting-tools" target="_blank">GitHub</a>
      <a href="https://github.com/frncsdrk/no-data" target="_blank" class="float-right">No Data</a>
    </footer>

    <script>
      function onLoad() {
        document.getElementById('format-btn').addEventListener('click', format);
        document.getElementById('clear-btn').addEventListener('click', clear);
        window.addEventListener('keypress', onKeypress);
      }

      function format() {
        const chkbxRmEmptyLines = document.getElementById('chkbx-rm-empty-lines').checked;
        const formattedLines = [];
        const unformattedLines = document.getElementById('textarea-input').value.split('\n');
        for (let i = 0; i < unformattedLines.length; i++) {
          const line = unformattedLines[i];

          if (chkbxRmEmptyLines && line === '') continue; // skip empty lines

          formattedLines.push(line.trim());
        }

        document.getElementById('output').innerText = formattedLines.join('\n');
      }

      function clear() {
        document.getElementById('textarea-input').value = '';
        document.getElementById('output').innerText = '';
      }

      function onKeypress(e) {
        if (e.keyCode === 13) {
          format();
        }
      }

      window.addEventListener('load', onLoad);
    </script>
  </body>
</html>
